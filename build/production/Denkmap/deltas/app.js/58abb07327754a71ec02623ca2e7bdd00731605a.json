["/*16c3a5eb2c4101f6f84592b5207d66d0ef6f3580",42,406873,"data.proxy.Rest\",{extend:Ext.data.proxy.Ajax,alternateClassName:\"Ext.data.RestProxy\",alias:\"proxy.rest\",config:{appendId:true,format:null,batchActions:false",361047,50,"UT\",destroy:\"DELETE\"}},buildUrl:function(f){var i=this,e=f.getOperation(),c=e.getRecords()||[],h=c[0],g=i.getModel(),k=g.getIdProperty(),j=i.getFormat(),a=i.getUrl(f),d=f.getParams()||{},b=(h&&!h.phantom)?h.getId():d[k];if(i.getAppendId()&&b){if(!a.match(/\\/$/)){a+=\"/\"}a+=b;delete d[k]}if(j){if(!a.match(/\\.$/)){a+=\".\"}a+=j}f.setUrl(a);return i.callParent([f])}",406896,84700,",webservices:{monument:{getUrl:function(b,a){return\"./nearby/\"+b+\",\"+a},radius:1000,limit:25}},zIndex:{overlayLeafletMap:1500}",316112,45,491641,1657,"model.Monument\",{extend:Ext.data.Model,config:{idProperty:\"_id\",fields:[{name:\"_id\",type:\"auto\"},{name:\"geometry\",type:\"auto\"},{name:\"properties\",type:\"auto\"}]",493274,10878,",{xtype:\"button\",cls:\"mapRefreshButton\",iconCls:\"refresh\",iconMask:true,align:\"right\"",504151,395,"Refresh",504486,42,"RefreshButton]\",mapLoadingIc",504490,38,"LoadingIc",504538,157,",mapRefresh",504645,33,"RefreshButtonTap\"}},lLayerGroup:null,lLayerControl:null,markersLoaded:false,monumentsStore:null},init:function(){var a=this;a.setLLayerGroup(window.L.layerGroup())",504724,48,"setupLeafletMap,scope:a},locationupdate:{fn:a._updateLeafletMap,scope:a}});this.setMonumentsStore(Ext.getStore(\"Monuments\"));a.getMonumentsStore().on({load:{fn:function(){a._updateMarkersOnMap()}",504795,47,"setupLeafletMap:function(c){var b=this,a=new window.L.Control.Layers();console.log(\"Setup map\");a.addTo(b.getMapCmp().getMap());b.setLLayerControl(a);b.getLLayerControl().addOverlay(b.getLLayerGroup(),\"Monuments\");b._enableAllLayers();a.removeFrom(b.getMapCmp().getMap());b._updateLeafletMap(c)},_enableAllLayers:",53624,39,"ClassName(\"leaflet-control-layers-selector\"),b;for(b=0;b<a.length;b++){a[b].checked=true}this.getLLayerControl()._onInputClick()},_updateLeafletMap:function(b){var a=this,c;console.log(\"Map upd",505553,39,"c=Denkmap.util.Config.getWebservices().monument.getUrl(b.getLatitude(),b.getLongitude());a.getMonumentsStore().getProxy().setUrl(c);a.getMonumentsStore().load()},_updateMarkersOnMap:function(){var a=this;a.getLLayerGroup().clearLayers();a.getMonumentsStore().each(function(b){a.getLLayerGroup().addLayer(a._createLMarkerFromModel(b))});a.setMarkersLoaded(true)},_createLMarkerFromModel:function(c){var e=this,g=c.get(\"geometry\").coordinates[1],h=c.get(\"geometry\").coordinates[0],b",505243,38,",d=b.getStyleForMonument(c.get(\"properties\")),a=window.L.circleMarker([g,h],d),f;f=\"<ul>\";if(c.get(\"properties\").baugruppe){f",504983,32,"c.get(\"properties\").baugruppe+\"</li>\"}if(c.get(\"properties\").objtext){f+=\"<li><b>Objekt:</b>&nbsp;\"+c.get(\"properties\").objtext+\"</li>\"}if(c.get(\"properties\").baujahr){f+=\"<li><b>Baujahr:</b>&nbsp;\"+c.get(\"properties\").baujahr+\"</li>\"}f+=\"</ul>\";a.bindPopup(f);a.record=c;console.log(a);return a",505649,86,"onMapNavigationViewRefreshButtonTap:function(){var a=this;a.setMarkersLoaded(false);a._updateLeafletMap(a.getMapCmp().getGeo());a._enterLoadingState(true",505731,43,505816,64,"_enterLoadingState:function(a,b){if(!b){this._showLoadMask(a)}if(this.getMarkersLoaded()){this._hideLoadMask(a)}else{Ext.defer(this._enterLoadingState,200,this,[a,true])}},_showLoadMask:function(a){console.log(\"show load mask\");this.getMapCenterButton().disable();this.getMapRefreshButton().hide();this.getMapLoadingIcon().show();if(!a){this.getMapNavigationView().setMasked({xtype:\"loadmask\",message:\"Loading...\",zIndex:Denkmap.util.Config.getZIndex().overlayLeafletMap})}},_hideLoadMask:function(a){console.log(\"hide load mask\");this.getMapLoadingIcon().hide();this.getMapCenterButton().enable();this.getMapRefreshButton().show();if(!a){this.getMapNavigationView().setMasked(false)}",505878,127,"define(\"Denkmap.store.Monuments\",{extend:Ext.data.Store,config:{autoLoad:false,model:\"Denkmap.model.Monument\",proxy:{type:\"rest\",url:\"./nearby/0,0\",pageParam:false,startParam:false,extraParams:{limit:Denkmap.util.Config.getWebservices().monument.limit,radius:Denkmap.util.Config.getWebservices().monument.radius},reader:{type:\"json\"}}",505997,87,"models:[\"Monument\"],stores:[\"Monuments",506081,855,";console.log(c",506935,210]